<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="robots" content="noindex, nofollow">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Toronto Star graphic template</title>
    <link rel="stylesheet" href="https://misc.thestar.com/interactivegraphic/assets/style.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet"> 
    <link rel="stylesheet" type="text/css" href="https://misc.thestar.com/interactivegraphic/libraries/interactive-graphic-cta/cta-style.css">

    <script src="https://d3js.org/d3.v4.js"></script>

<style>


@font-face {
  font-family: TorstarDeckCondensed;
  src: url(https://misc.thestar.com/fonts/TorstarDeckCondensed-Semibold.otf);
}


/* 
Raptors colours
#CE1141 for red
#000000 for black 
#A1A1A4 for silver
#B4975A for gold
*/


body {
	margin: 0;
  	-webkit-tap-highlight-color: rgba(0,0,0,0);
  	background-color: #f8f8f8;
}

* {
	box-sizing: border-box;
}

.graphic-top, .graphic-bottom, .wrapper {
    max-width: 660px;
    width: 100%;
    margin: 0 auto;
}


.graphic-wrapper {
  margin: 0 auto;
  /* max-width: 600px;  */
}



  .graphic {
    width: 100%;
    position: relative;

    font-family: 'Inter', -apple-system, BlinkMacSystemFont, Helvetica, Arial, sans-serif;
  }

  .graphic-legend {
    display: flex;
    justify-content: center;
    max-width: 660px;
    width: 100;
    margin: 0 auto;
  }

  .graphic-legend-line {
    float: left;
    display: block;
    height: 3px;
    width: 30px;
    /* border-radius: 16px; */
    margin-top: 8px;
    margin-right: 8px;
  }
  
  #legend-line-1 {
    background-color: #CE1141;
  }
  
  #legend-line-2 {
    background-color: #000000;    
  }

  .graphic-legend-container {
    min-width: 142px;
  }

  .interactive-graphic-cta {
    white-space: normal;
  }

  p {
    margin: 0;
    padding: 0;
  }

  .flexit {
    display: flex;
  }

  .flexitColumn {
    flex-direction: column;
  }

  .line-container {
    width: 1px;
    /* background-color: #999; */
    background-color: #CE1141;
    position: absolute;
    left: 50%;
    height: 100%;
    top: 0;
  }

  

  .date-container {
    background-color: #f8f8f8;
    padding: 16px;
    margin-bottom: 80px;
    position: relative;
    
  }

  .date-container p {
    font-weight: 600;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, Helvetica, Arial, sans-serif;
    margin: 0;
    text-align: center;
    font-size: 24px;
    line-height: 1em;
    letter-spacing: 1px;
    color: #CE1141;
    
  }
  
  .timeline-container {
    background-color: #f8f8f8;
    position: relative;
    padding: 16px;
    /* max-width: 500px; */
    max-width: 33%;
    margin: 0 auto 40px;
    
  }
  
  .timeline-container p {
    font-weight: 400;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, Helvetica, Arial, sans-serif;
    margin: 0;
    color: #444;
    font-size: 16px;
    line-height: 1.4em;
    letter-spacing: 0.25px;
  }
  

  .timeline-container p a {
     color: #333;
  }

   .timeline-container p a:hover {
    color: #CE1141;
   }

  .timeline-container p span {
    font-weight: 500;
    letter-spacing: 0.5px;
    margin: 0 1px;
    background-color: #CE1141;
    color: #F8F8F8;
    padding: 0 4px;
    white-space: nowrap;
    border-radius: 2px;
  }

  .timeline-container p.secondary-date {
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    display: block;
    padding-bottom: 8px;
    text-align: center;
    /* color: #222; */
    color: #CE1141;
  }
  
  .scoreContainer {
    display: flex;
    justify-content: center;
    text-align: center;
    margin-bottom: 12px;
  }

  .timeline-container p.wins, .timeline-container p.losses {
    display: block;
    margin: 0 12px;
  }
  
  .timeline-container p.wins span, .timeline-container p.losses span {
    font-weight: 600;
    color: #444;
    background-color: #F8F8F8;
  }

.graphic-map {
  display: block;
  width: 100%;
  max-width: 150px;
  margin: 0 auto 12px;
}

.graphic-img {
  display: block;
  width: 100%;
  max-width: 600px;
  margin: 0 auto 12px;
  border-radius: 0;
}

.seasonReport-container {
  display: flex;
}

.seasonGroup-container.flexit {
  flex-wrap: wrap;
}

.bracket {
 width: 16px;
 /* height: 100%; */
}

.leftBracket {
  border-top: 1px solid #CE1141;
  /* border-right: 0; */
  border-bottom: 1px solid #CE1141;
  border-left: 1px solid #CE1141;
}

.rightBracket {
  border-top: 1px solid #CE1141;
  border-right: 1px solid #CE1141;
  border-bottom: 1px solid #CE1141;
  /* border-left: 0; */
}

.report-container {
  padding: 30px;
  max-width: 660px;
  width: 100%;
  margin: 0 auto;
}

.reportNumbers {
  justify-content: space-around;
  text-align: center;
  margin: 12px auto;
}

p.reportNumber{
  font-size: 42px;
  color: #CE1141;
}

.seasonReport-container p.reportNumber{
  font-size: 28px;
}

.reportOutcomes-container {
  margin: 12px auto;
}

p.reportOutcomes-sub {
  font-weight: 600;
  color: #444;
  background-color: #F8F8F8;
}

.pwbreak {
  padding-bottom: 8px;
}

/*.graphic2 .line-container {
    background-color: #d10d0d;
  }*/

/*.graphic2 .timeline-container p.secondary-date, .graphic2 .date-container p {
    color: #b90c0c;
  }*/

/*.graphic2 .timeline-container p {
  color: #e90f0f;
}*/

/*.graphic2 .timeline-container p span {
  background-color: #fddfdf;
}
*/
  

p.interlude {
   font-weight: 400;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, Helvetica, Arial, sans-serif;
    margin: 0 0 72px;
    color: #444;
    font-size: 20px;
    line-height: 1.4em;
    letter-spacing: 0.25px;
    text-align: center;

}

/* Chart */

.seasonText {
    fill: #444;
    text-transform: uppercase;
    font-size: 14px;
}

.marginLine {
  padding: 10px 0 0;
  margin: 0 0 10px;
}

.horizontal {
  border-top: .5px solid #CE1141;
}

.vertical {
  border-right: .5px solid #CE1141;
}



 @media (max-width: 850px) { 
   .timeline-container {
     padding: 16px;
     max-width: 50%;
     
   }

  
 }


 @media (max-width: 600px) { 
   .timeline-container {
     padding: 16px;
     max-width: none;
     min-width: none;
     width: 100%;
     
   }
 }

 @media (max-width: 450px) {

  .date-container {
     padding: 12px 4px;
     margin-bottom: 48px;
  }

  .date-container p {
     font-size: 20px;

  }

   .timeline-container {
    padding: 12px 4px;
    max-width: 500px;
    margin: 0 auto 48px;
   }

   .timeline-container p { 
    font-size: 15px;
   }

   p.interlude {
     margin: 0 0 56px;
      font-size: 18px;
   }

}




</style>
</head>
<body>
  <div class="graphic-wrapper graphic-1">
    <div class="graphic-top">
      <h2 class="graphic-top__graphic-hed">Nick Nurse's time at the Raptos by-the-numbers</h2>
      <h3 class="graphic-top__graphic-dek">Nurse's introduction to the Raptors was as an Assistant Coach in charge of offence, which saw the team's offensive line generate impressive numbers for five years. Later, an NBA Championship and a Coach of The Year in his starting season as The Raptors' head coach. This is what </h3>
      
      </div>
      
      <div class="graphic">
        
        <!-- <div class="graphic-legend">
            <div class="graphic-legend-container">
                <div class="graphic-legend-line" id="legend-line-1"></div><p class="graphic-legend-text">Overal record</p>
            </div>
            <div class="graphic-legend-container">
                <div class="graphic-legend-line" id="legend-line-2"></div><p class="graphic-legend-text">Season record</p>
            </div>
        </div> -->
        <div class="wrapper">
          <span class="interactive-graphic-cta interactive-graphic-cta__desktop"><img class="interactive-graphic-cta-image" src="https://misc.thestar.com/interactivegraphic/libraries/interactive-graphic-cta/SVG/Hover.svg" height="23px">Hover over the lines to see the ratio details</span><span class="interactive-graphic-cta interactive-graphic-cta__mobile"><img class="interactive-graphic-cta-image" src="https://misc.thestar.com/interactivegraphic/libraries/interactive-graphic-cta/SVG/Tap.svg" height="23px">Tap over the lines to see the ratio details</span>
        </div>
        <div id="chart1"></div>


        <div class="total-container">
          <div class="report-container">
            <!-- <p class="secondary-date">2018-2019<br> season report</p> -->
            <div class="reportNumbers flexit">
              <div class="winsReport-container flexit flexitColumn">
                <p class="reportNumberTitle"><br></p>
                <p class="reportNumber">Overall stats</p>
              </div>
              <div class="winsReport-container flexit flexitColumn">
                <p class="reportNumberTitle">Wins</p>
                <p class="reportNumber">252</p>
              </div>
              <div class="lossReport-container flexit flexitColumn">
                <p class="reportNumberTitle">Losses</p>
                <p class="reportNumber">180</p>
              </div>
              <div class="ratioReport-container flexit flexitColumn">
                <p class="reportNumberTitle">Win Ratio</p>
                <p class="reportNumber">.583</p>
              </div>
            </div>
            <!-- <div class="reportOutcomes-container">
              <p class="reportOutcomes-sub">Outcomes</p>
              <p class="outcome regSeason"><span>Regular Season:</span>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
              <p class="outcome playoffSeason"><span>Playoff:</span> NBA champions Lorem ipsum dolor sit amet consectetur adipisicing elit. Optio, explicabo. </p>
            </div>
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Nobis quod, maiores aut et blanditiis totam deserunt veritatis tempore dolor dolorem quidem voluptas impedit ipsam.</p> -->
          </div>
        </div>

        <div class="marginLine horizontal"></div>
        
        <div class="seasonGroup-container flexit">

          <div class="timeline-container">
            <div class="seasonReport-container">
              <div class="bracket leftBracket"></div>
              <div class="report-container">
                <p class="secondary-date">2018-2019 season</p>

                <img class="graphic-img" src="./img/GettyImages-1149777524.jpg" alt="Nick Nurse is introduced as the new NBA head coach of the Toronto Raptors at the Air Canada Centre in Toronto on Thursday, June 14, 2018">
                
                <div class="reportNumbers flexit">
                  <div class="winsReport-container flexit flexitColumn">
                    <p class="reportNumberTitle">Wins</p>
                    <p class="reportNumber">74</p>
                  </div>
                  <div class="lossReport-container flexit flexitColumn">
                    <p class="reportNumberTitle">Losses</p>
                    <p class="reportNumber">32</p>
                  </div>
                  <div class="ratioReport-container flexit flexitColumn">
                    <p class="reportNumberTitle">Win Ratio</p>
                    <p class="reportNumber">.698</p>
                  </div>
                </div>
                <p class="reportOutcomes-sub">Season Ratio</p>
                <div id="chart2" class="seasonCharts"></div>
                <div class="reportOutcomes-container">
                  <p class="reportOutcomes-sub">Outcomes</p>
                  <p class="outcome regSeason"><span>Regular Season:</span> Second place in the Eastern Conference</p>
                  <p class="outcome playoffSeason"><span>Playoff:</span> Defeated the Buck in the Conference Finals (4-2), and then the Warriors (4-2) to become the NBA Champions</p>
                </div>
                <!-- <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Nobis quod, maiores aut et blanditiis totam deserunt veritatis tempore dolor dolorem quidem voluptas impedit ipsam.</p> -->
              </div>
              <div class="bracket rightBracket"></div>
            </div>
          </div>

          <div class="timeline-container">
            <div class="seasonReport-container">
              <div class="bracket leftBracket"></div>
              <div class="report-container">
                <p class="secondary-date">2019-2020 season</p>

                <img class="graphic-img" src="./img/T1J104482149.JPG" alt="Nick Nurse is introduced as the new NBA head coach of the Toronto Raptors at the Air Canada Centre in Toronto on Thursday, June 14, 2018">
                
                <div class="reportNumbers flexit">
                  <div class="winsReport-container flexit flexitColumn">
                    <p class="reportNumberTitle">Wins</p>
                    <p class="reportNumber">60</p>
                  </div>
                  <div class="lossReport-container flexit flexitColumn">
                    <p class="reportNumberTitle">Losses</p>
                    <p class="reportNumber">23</p>
                  </div>
                  <div class="ratioReport-container flexit flexitColumn">
                    <p class="reportNumberTitle">Win Ratio</p>
                    <p class="reportNumber">.723</p>
                  </div>
                </div>
                <p class="reportOutcomes-sub">Season Ratio</p>
                <div id="chart3" class="seasonCharts"></div>
                <div class="reportOutcomes-container">
                  <p class="reportOutcomes-sub">Outcomes</p>
                  <p class="outcome regSeason"><span>Regular Season:</span> Second in the Eastern Conference</p>
                  <p class="outcome playoffSeason"><span>Playoff:</span> Swept the Nets on the first round (4-0), and then defeated by the Celtics in the conference semi-finals (4-3)</p>
                </div>
                <!-- <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Nobis quod, maiores aut et blanditiis totam deserunt veritatis tempore dolor dolorem quidem voluptas impedit ipsam.</p> -->
              </div>
              <div class="bracket rightBracket"></div>
            </div>
          </div>

          <div class="timeline-container">
            <div class="seasonReport-container">
              <div class="bracket leftBracket"></div>
              <div class="report-container">
                <p class="secondary-date">2020-2021 season</p>

                <img class="graphic-img" src="./img/T1J104482149.JPG" alt="Nick Nurse is introduced as the new NBA head coach of the Toronto Raptors at the Air Canada Centre in Toronto on Thursday, June 14, 2018">
                
                <div class="reportNumbers flexit">
                  <div class="winsReport-container flexit flexitColumn">
                    <p class="reportNumberTitle">Wins</p>
                    <p class="reportNumber">27</p>
                  </div>
                  <div class="lossReport-container flexit flexitColumn">
                    <p class="reportNumberTitle">Losses</p>
                    <p class="reportNumber">45</p>
                  </div>
                  <div class="ratioReport-container flexit flexitColumn">
                    <p class="reportNumberTitle">Win Ratio</p>
                    <p class="reportNumber">.375</p>
                  </div>
                </div>
                <p class="reportOutcomes-sub">Season Ratio</p>
                <div id="chart4" class="seasonCharts"></div>
                <div class="reportOutcomes-container">
                  <p class="reportOutcomes-sub">Outcomes</p>
                  <p class="outcome regSeason"><span>Regular Season:</span>12th in the eastern conference. The lowest win percentage during Nurse's tenure at the Raptors</p>
                  <p class="outcome playoffSeason"><span>Playoff:</span> Did not qualify </p>
                </div>
                <!-- <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Nobis quod, maiores aut et blanditiis totam deserunt veritatis tempore dolor dolorem quidem voluptas impedit ipsam.</p> -->
              </div>
              <div class="bracket rightBracket"></div>
            </div>
          </div>

          <div class="timeline-container">
            <div class="seasonReport-container">
              <div class="bracket leftBracket"></div>
              <div class="report-container">
                <p class="secondary-date">2021-2022 season</p>

                <img class="graphic-img" src="./img/T1J104482149.JPG" alt="Nick Nurse is introduced as the new NBA head coach of the Toronto Raptors at the Air Canada Centre in Toronto on Thursday, June 14, 2018">
                
                <div class="reportNumbers flexit">
                  <div class="winsReport-container flexit flexitColumn">
                    <p class="reportNumberTitle">Wins</p>
                    <p class="reportNumber">50</p>
                  </div>
                  <div class="lossReport-container flexit flexitColumn">
                    <p class="reportNumberTitle">Losses</p>
                    <p class="reportNumber">38</p>
                  </div>
                  <div class="ratioReport-container flexit flexitColumn">
                    <p class="reportNumberTitle">Win Ratio</p>
                    <p class="reportNumber">.568</p>
                  </div>
                </div>
                <p class="reportOutcomes-sub">Season Ratio</p>
                <div id="chart5" class="seasonCharts"></div>
                <div class="reportOutcomes-container">
                  <p class="reportOutcomes-sub">Outcomes</p>
                  <p class="outcome regSeason"><span>Regular Season:</span> Fifth place in the eastern conference</p>
                  <p class="outcome playoffSeason"><span>Playoff:</span> Lost in the first round agains the 76ers (4-2)</p>
                </div>
              </div>
              <div class="bracket rightBracket"></div>
            </div>
          </div>

          <div class="timeline-container">
            <div class="seasonReport-container">
              <div class="bracket leftBracket"></div>
              <div class="report-container">
                <p class="secondary-date">2022-2023 season</p>

                <img class="graphic-img" src="./img/T1J104482149.JPG" alt="Nick Nurse is introduced as the new NBA head coach of the Toronto Raptors at the Air Canada Centre in Toronto on Thursday, June 14, 2018">
                
                <div class="reportNumbers flexit">
                  <div class="winsReport-container flexit flexitColumn">
                    <p class="reportNumberTitle">Wins</p>
                    <p class="reportNumber">41</p>
                  </div>
                  <div class="lossReport-container flexit flexitColumn">
                    <p class="reportNumberTitle">Losses</p>
                    <p class="reportNumber">42</p>
                  </div>
                  <div class="ratioReport-container flexit flexitColumn">
                    <p class="reportNumberTitle">Win Ratio</p>
                    <p class="reportNumber">.494</p>
                  </div>
                </div>
                <p class="reportOutcomes-sub">Season Ratio</p>
                <div id="chart6" class="seasonCharts"></div>
                <div class="reportOutcomes-container">
                  <p class="reportOutcomes-sub">Outcomes</p>
                  <p class="outcome regSeason"><span>Regular Season:</span> Tenth place in the eastern conference</p>
                  <p class="outcome playoffSeason"><span>Playoff:</span> Failed to qualify after losing the firs play in game against Chicago</p>
                </div>
                <!-- <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Nobis quod, maiores aut et blanditiis totam deserunt veritatis tempore dolor dolorem quidem voluptas impedit ipsam.</p> -->
              </div>
              <div class="bracket rightBracket"></div>
            </div>
          </div>

        </div> <!-- end of season group container -->

        
      </div> <!-- end of graphic tag -->
      
      
      
      

    <div class="graphic-bottom">
        <p class="graphic-bottom__notetext" id="notetext">* Any further note to explain one aspect of the data could go here.</p>
        <p class="graphic-bottom__graphic-source" id="source">Source: Stats report</p>
        <p class="graphic-bottom__graphic-byline" id="byline">Toronto Star graphic</p>
    </div>
  </div>

<script>

var parseDate = d3.timeParse("%m/%d/%Y");
var formatTime = d3.timeFormat("%b %e");
const chartWidth =  parseInt(d3.select('#chart1').style('width'))
let seasonWords = '';
if (chartWidth >= 695) {
  seasonWords = ' season'
}
const chart2Width =  parseInt(d3.select('#chart2').style('width'))
const chart3Width =  parseInt(d3.select('#chart3').style('width'))
const chart4Width =  parseInt(d3.select('#chart4').style('width'))
const chart5Width =  parseInt(d3.select('#chart5').style('width'))
const chart6Width =  parseInt(d3.select('#chart6').style('width'))

// set the dimensions and margins of the graph
var margin = {top: 100, right: 30, bottom: 30, left: 30},
    width = chartWidth - margin.left - margin.right,
    height = 300 - margin.top - margin.bottom;

// append the svg object to the body of the page
var svg = d3.select("#chart1")
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");

          // set the dimensions and margins of the graph
var smallMargin = {top: 10, right: 10, bottom: 30, left: 10},
    smallwidth = chart2Width - smallMargin.left - smallMargin.right,
    smallheight = 150 - smallMargin.top - smallMargin.bottom;
// append the svg object to the body of the page
var svg2 = d3.select("#chart2")
  .append("svg")
    .attr("width", smallwidth + smallMargin.left + smallMargin.right)
    .attr("height", smallheight + smallMargin.top + smallMargin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + smallMargin.left + "," + smallMargin.top + ")");
// append the svg object to the body of the page
var svg3 = d3.select("#chart3")
  .append("svg")
    .attr("width", smallwidth + smallMargin.left + smallMargin.right)
    .attr("height", smallheight + smallMargin.top + smallMargin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + smallMargin.left + "," + smallMargin.top + ")");
// append the svg object to the body of the page
var svg4 = d3.select("#chart4")
  .append("svg")
    .attr("width", smallwidth + smallMargin.left + smallMargin.right)
    .attr("height", smallheight + smallMargin.top + smallMargin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + smallMargin.left + "," + smallMargin.top + ")");
// append the svg object to the body of the page
var svg5 = d3.select("#chart5")
  .append("svg")
    .attr("width", smallwidth + smallMargin.left + smallMargin.right)
    .attr("height", smallheight + smallMargin.top + smallMargin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + smallMargin.left + "," + smallMargin.top + ")");
// append the svg object to the body of the page
var svg6 = d3.select("#chart6")
  .append("svg")
    .attr("width", smallwidth + smallMargin.left + smallMargin.right)
    .attr("height", smallheight + smallMargin.top + smallMargin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + smallMargin.left + "," + smallMargin.top + ")");

//Read the data
d3.csv("./data/nick-nurse-games.csv",function(data) {

    data.forEach(function(d) {
        d.date = parseDate(d.date)
    });
    
    console.log(data);

  // Add X axis --> it is a date format
//   var x = d3.scaleTime()
//       .domain(d3.extent(data, function(d) { return d.date; }))
//       .range([ 0, width ]);
//     svg.append("g")
//       .attr("transform", "translate(0," + height + ")")
//       .call(d3.axisBottom(x));

// Add X axis --> it is a date format
var x = d3.scaleLinear()
    .domain([1,data.length])
    .range([ 0, width ]);
  svg.append("g")
    .attr("transform", "translate(0," + height + ")")
    // .call(d3.axisBottom(x));

  // Add Y axis
  var y = d3.scaleLinear()
    .domain([0, 1])
    .range([ height, 0 ]);
  svg.append("g")
    // .call(d3.axisLeft(y));

// Add X axis --> it is a date format
var x2 = d3.scaleLinear()
    .domain([0, 106])
    .range([ 0, smallwidth ]);
  svg2.append("g")
    .attr("transform", "translate(0," + smallheight + ")")

// Add X axis --> it is a date format
var x3 = d3.scaleLinear()
    .domain([107, 189])
    .range([ 0, smallwidth ]);
  svg3.append("g")
    .attr("transform", "translate(0," + smallheight + ")")

// Add X axis --> it is a date format
var x4 = d3.scaleLinear()
    .domain([190, 261])
    .range([ 0, smallwidth ]);
  svg4.append("g")
    .attr("transform", "translate(0," + smallheight + ")")

// Add X axis --> it is a date format
var x5 = d3.scaleLinear()
    .domain([262, 349])
    .range([ 0, smallwidth ]);
  svg5.append("g")
    .attr("transform", "translate(0," + smallheight + ")")

// Add X axis --> it is a date format
var x6 = d3.scaleLinear()
    .domain([350, data.length])
    .range([ 0, smallwidth ]);
  svg6.append("g")
    .attr("transform", "translate(0," + smallheight + ")")

// Add X axis --> it is a date format
var xS = d3.scaleLinear()
    .domain([1,data.length])
    .range([ 0, smallwidth ]);
  svg2.append("g")
    .attr("transform", "translate(0," + smallheight + ")")

  // Add Y axis
  var yS = d3.scaleLinear()
    .domain([0, 1])
    .range([ smallheight, 0 ]);
  svg2.append("g")

  //.5 line
  svg.append("line")
    .attr("class", "positionline")
    .style("stroke", "#444")
    .style("stroke-dasharray", "3,5")
    .style("opacity", 0.5)
    .attr("y1", height/2)
    .attr("y2", height/2)
    .attr("x1", x(10))
    .attr("x2", width);

  //.5 line
  d3.selectAll(".seasonCharts svg")
    .append("line")
    .attr("class", "positionline")
    .style("stroke", "#444")
    .style("stroke-dasharray", "3,5")
    .style("opacity", 0.5)
    .attr("y1", smallheight/2)
    .attr("y2", smallheight/2)
    .attr("x1", xS(15))
    .attr("x2", width);

  //end of 18-19 season
  svg.append("line")
    .attr("class", "positionline")
    .style("stroke", "#444")
    .style("opacity", 0.5)
    .attr("y1", 0)
    .attr("y2", height)
    .attr("x1", x(data[106].indx))
    .attr("x2", x(data[106].indx));

  //end of 19-20 season
  svg.append("line")
    .attr("class", "positionline")
    .style("stroke", "#444")
    .style("opacity", 0.5)
    .attr("y1", 0)
    .attr("y2", height)
    .attr("x1", x(data[189].indx))
    .attr("x2", x(data[189].indx));

  //end of 20-21 season
  svg.append("line")
    .attr("class", "positionline")
    .style("stroke", "#444")
    .style("opacity", 0.5)
    .attr("y1", 0)
    .attr("y2", height)
    .attr("x1", x(data[261].indx))
    .attr("x2", x(data[261].indx));

  //end of 20-21 season
  svg.append("line")
    .attr("class", "positionline")
    .style("stroke", "#444")
    .style("opacity", 0.5)
    .attr("y1", 0)
    .attr("y2", height)
    .attr("x1", x(data[349].indx))
    .attr("x2", x(data[349].indx));

  //season 18-19 text
  svg.append('g')
    .append('text')
      .attr("class","seasonText")
      .attr("text-anchor", "middle")
    //   .attr("alignment-baseline", "middle")
      .html("18-19 " + seasonWords)
      .attr("x", x(data[53].indx))
      .attr("y", height)

  //season 19-20 text
  svg.append('g')
    .append('text')
      .attr("class","seasonText")
      .attr("text-anchor", "middle")
    //   .attr("alignment-baseline", "middle")
      .html("19-20 " + seasonWords)
      .attr("x", x(data[148].indx))
      .attr("y", height)

  //season 20-21 text
  svg.append('g')
    .append('text')
      .attr("class","seasonText")
      .attr("text-anchor", "middle")
    //   .attr("alignment-baseline", "middle")
      .html("20-21 " + seasonWords)
      .attr("x", x(data[225].indx))
      .attr("y", height)

  //season 21-22 text
  svg.append('g')
    .append('text')
      .attr("class","seasonText")
      .attr("text-anchor", "middle")
    //   .attr("alignment-baseline", "middle")
      .html("21-22 " + seasonWords)
      .attr("x", x(data[305].indx))
      .attr("y", height)

  //season 22-23 text
  svg.append('g')
    .append('text')
      .attr("class","seasonText")
      .attr("text-anchor", "middle")
    //   .attr("alignment-baseline", "middle")
      .html("22-23 " + seasonWords)
      .attr("x", x(data[392].indx))
      .attr("y", height)

  //season 50% text
  svg.append('g')
    .append('text')
      .attr("class","seasonText")
      .attr("text-anchor", "middle")
    //   .attr("alignment-baseline", "middle")
      .html(".500")
      .attr("x", 0)
      .attr("y", y(.48))

  //season 50% text
  svg2.append('g')
    .append('text')
      .attr("class","seasonText")
      .attr("text-anchor", "middle")
    //   .attr("alignment-baseline", "middle")
      .html(".500")
      .attr("x", 0)
      .attr("y", yS(.53))

  //season 50% text
  svg3.append('g')
    .append('text')
      .attr("class","seasonText")
      .attr("text-anchor", "middle")
    //   .attr("alignment-baseline", "middle")
      .html(".500")
      .attr("x", 0)
      .attr("y", yS(.53))

  //season 50% text
  svg4.append('g')
    .append('text')
      .attr("class","seasonText")
      .attr("text-anchor", "middle")
    //   .attr("alignment-baseline", "middle")
      .html(".500")
      .attr("x", 0)
      .attr("y", yS(.53))

  //season 50% text
  svg5.append('g')
    .append('text')
      .attr("class","seasonText")
      .attr("text-anchor", "middle")
    //   .attr("alignment-baseline", "middle")
      .html(".500")
      .attr("x", 0)
      .attr("y", yS(.53))

  //season 50% text
  svg6.append('g')
    .append('text')
      .attr("class","seasonText")
      .attr("text-anchor", "middle")
    //   .attr("alignment-baseline", "middle")
      .html(".500")
      .attr("x", 0)
      .attr("y", yS(.53))



  // This allows to find the closest X index of the mouse:
  var bisect = d3.bisector(function(d) { return d.indx; }).left;

// Add the line for all
svg
  .append("path")
  .datum(data)
  .attr("fill", "none")
  .attr("stroke", "#CE1141")
  .attr("stroke-width", 2.3)
  .attr("d", d3.line()
    .x(function(d) { return x(d.indx) })
    .y(function(d) { return y(d.wlRatio) })
    )

// // Add the line for 18-19 season
svg2
  .append("path")
  .datum(data.filter(function(d){return d.indx >= 0 &&  d.indx <= 106 }))
  .attr("fill", "none")
  .attr("stroke", "#CE1141")
  .attr("stroke-width", 2.3)
  .attr("d", d3.line()
    .x(function(d) { return x2(d.indx) })
    .y(function(d) { return yS(d.seasonWratio) })
    )

// Add the line for 19-20 season
svg3
  .append("path")
  .datum(data.filter(function(d){return d.indx >= 107 &&  d.indx <= 189 }))
  .attr("fill", "none")
  .attr("stroke", "#CE1141")
  .attr("stroke-width", 2.3)
  .attr("d", d3.line()
    .x(function(d) { return x3(d.indx) })
    .y(function(d) { return yS(d.seasonWratio) })
    )

// Add the line for 20-21 season
svg4
  .append("path")
  .datum(data.filter(function(d){return d.indx >= 190 &&  d.indx <= 261 }))
  .attr("fill", "none")
  .attr("stroke", "#CE1141")
  .attr("stroke-width", 2.3)
  .attr("d", d3.line()
    .x(function(d) { return x4(d.indx) })
    .y(function(d) { return yS(d.seasonWratio) })
    )

  // Add the line for 21-22 season
svg5
  .append("path")
  .datum(data.filter(function(d){return d.indx >= 262 &&  d.indx <= 349 }))
  .attr("fill", "none")
  .attr("stroke", "#CE1141")
  .attr("stroke-width", 2.3)
  .attr("d", d3.line()
    .x(function(d) { return x5(d.indx) })
    .y(function(d) { return yS(d.seasonWratio) })
    )
  
  // Add the line for 22-23 season
svg6
  .append("path")
  .datum(data.filter(function(d){return d.indx >= 350 &&  d.indx <= data.length }))
  .attr("fill", "none")
  .attr("stroke", "#CE1141")
  .attr("stroke-width", 2.3)
  .attr("d", d3.line()
    .x(function(d) { return x6(d.indx) })
    .y(function(d) { return yS(d.seasonWratio) })
    )

// Create a rect on top of the svg area: this rectangle recovers mouse position
var focusLine = svg
    .append("line")
    .attr("class", "positionline")
    .style("stroke", "#CE1141")
    .style("opacity", 1)
    .attr("y1", y(data[data.length-1].wlRatio)-5.5)
    .attr("y2", 0 - margin.top + margin.bottom)
    .attr("x1", x(data[data.length-1].indx))
    .attr("x2", x(data[data.length-1].indx));

  // Create the circle that travels along the curve of chart on overall
  var focus = svg
    .append('g')
    .append('circle')
      .style("fill", "none")
      .attr("stroke", "#CE1141")
      .attr('r', 5.5)
      .style("opacity", 1)
      .attr("cx", x(data[data.length-1].indx))
      .attr("cy", y(data[data.length-1].wlRatio))

  // // Create the circle that travels along the curve of chart on each season
  // var focusSeason = svg
  //   .append('g')
  //   .append('circle')
  //     .style("fill", "none")
  //     .attr("stroke", "#000")
  //     .attr('r', 5.5)
  //     .style("opacity", 1)
  //     .attr("cx", x(data[data.length-1].indx))
  //     .attr("cy", y(data[data.length-1].seasonWratio));

  // Create the text that travels along the curve of chart
  var focusText = svg
    .append('g')
    .append('text')
      .style("opacity", 1)
      .attr("text-anchor", "left")
      .attr("alignment-baseline", "middle")
      .html("Overall win ratio " + data[data.length-1].wlRatio)
      .attr("y", 15 - margin.top + margin.bottom)
      .attr("x", x(data[data.length-1].indx)-180);

  // // Create the text that travels along the curve of chart
  // var focusTextSeason = svg
  //   .append('g')
  //   .append('text')
  //     .style("opacity", 1)
  //     .attr("text-anchor", "left")
  //     .attr("alignment-baseline", "middle")
  //     .html(data[data.length-1].season + " win ratio " + data[data.length-1].seasonWratio)
  //     .attr("y", 35 - margin.top + margin.bottom)
  //     .attr("x", x(data[data.length-1].indx)-180);

  // Create a rect on top of the svg area: this rectangle recovers mouse position
  svg
    .append('rect')
    .style("fill", "none")
    .style("pointer-events", "all")
    .attr('width', width)
    .attr('height', height)
    .on('mouseover', mouseover)
    .on('mousemove', mousemove)
    .on('mouseout', mouseout);


  // What happens when the mouse move -> show the annotations at the right positions.
  function mouseover() {
    focus.style("opacity", 1)
    focusSeason.style("opacity", 1)
    focusLine.style("opacity", 1)
    focusText.style("opacity",1)
    focusTextSeason.style("opacity",1)
  }

  function mousemove() {
    // recover coordinate we need
    var x0 = x.invert(d3.mouse(this)[0]);
    var i = bisect(data, x0, 1);
    selectedData = data[i]
    focusLine
        .attr("y1", y(selectedData.wlRatio)-5.5)
        .attr("y2", 0 - margin.top + margin.bottom)
        .attr("x1", x(selectedData.indx))
        .attr("x2", x(selectedData.indx));
    focus
      .attr("cx", x(selectedData.indx))
      .attr("cy", y(selectedData.wlRatio))
    // focusSeason
    //   .attr("cx", x(selectedData.indx))
    //   .attr("cy", y(selectedData.seasonWratio))
    focusText
    //   .html("x:" + selectedData.date + "  -  " + "y:" + selectedData.wlRatio)
      .html("Overall win ratio " + selectedData.wlRatio)
        // .attr("y", y(.9))
        .attr("y", 15 - margin.top + margin.bottom)
    //   .attr("x", x(selectedData.indx)+15)
      .attr("x", function() {
                          if (d3.event.pageX > (width/2)) {return x(selectedData.indx)-180}
                          else {return x(selectedData.indx)+15}
                        });
    // focusTextSeason
    //   .html(selectedData.season + " win ratio " + selectedData.seasonWratio)
    //     .attr("y", 35 - margin.top + margin.bottom)
    //   .attr("x", function() {
    //                       if (d3.event.pageX > (width/2)) {return x(selectedData.indx)-180}
    //                       else {return x(selectedData.indx)+15}
    //                     });
    }
  function mouseout() {
    // focus.style("opacity", 0)
    // focusLine.style("opacity", 0)
    // focusText.style("opacity", 0)
  }

})





    function resize(){
        var message = {'resize': 
                  {
                    'iframe':'graphic-iframe-1',
                    'height': document.getElementsByClassName('graphic-1')[0].offsetHeight + 20
                  }
                };
       
        parent.postMessage(message, "*");

        
    };

    window.addEventListener('load', function() {
        resize();
    });

    window.addEventListener("resize", function(){
        resize();
    });

    setTimeout(function() {
                        resize();
                    }, 800);

  
	document.addEventListener("touchstart", function(){}, true);

</script>

<!-- <style>#graphic-iframe-1{padding:0;width:100%;border:0;overflow:hidden;}</style><iframe id="graphic-iframe-1" src="SOURCETKTKTKT" scrolling="no" height="1050" title="embedded content"></iframe> -->

</body>
</html>